<div class="page-header">
  <h3><%= @kid.kid_name %></h3>
</div>

<div class="row">
  <div class="col-md-12 mb-2">
    <dl class="dl-horizontal">


      <dt>Family</dt>
      <dd>
        <% if @kid.family.present? %>
          <a href="/families/<%= @kid.family_id %>">
            <%= @kid.family.family_name %>
          </a>
        <% end %>
      </dd>

    </dl>

    <div class="btn-group btn-group-justified">
      <a href="/kids" class="btn btn-primary">
        Back
      </a>
      <a href="/kids/<%= @kid.id %>/edit" class="btn btn-warning">
        Edit
      </a>
      <a href="/delete_kid/<%= @kid.id %>" class="btn btn-danger" rel="nofollow">
        Delete
      </a>
    </div>
  </div>
</div>

<!-- A Kid has many assignments -->

<div class="row">
  <div class="col-md-12 mb-2">
     <table class="table table-striped table-hover">
      <tr>
      <th>Assignments</th>
      <th>Chore Value</th>
      <th>Due Date</th>
      <th>Status</th>
      <th>Action</th>
      </tr>
      <% runningTotal = 0 %>
      <% @kid.assignments.each do |assignment| %>
      <tr>
          <td><a href="/assignments/<%= assignment.id %>">
        
            <%= assignment.chores.chore_name %>
          </a>
          </td>

          <td><%= number_to_currency(assignment.chores.chore_value) %></td>
          <td><%= assignment.due_date.to_date %></td>
          <td>
            <% if assignment.completed %>
              Completed
            <% else %>
              Not Complete
            <% end %>
          </td>
          <td>

            <a href="/assignments/<%= assignment.id %>" class="btn btn-primary">Show</a>
          <% if !assignment.completed %>
            <% runningTotal += assignment.chores.chore_value %>
            <a href="/assignments/<%= assignment.id %>/complete" class="btn btn-success">
              Complete
            </a>
          <% end %>
          <a href="/assignments/<%= assignment.id %>/edit" class="btn btn-warning">Edit</a>
          <a href="/delete_assignments/<%= assignment.id %>" class="btn btn-danger" rel="nofollow">Delete</a>
          </td>
        </tr>
      <% end %>
      </table>
      <h3>Total Completed Tasks: <%= number_to_currency(runningTotal) %></h3>

  </div>
</div>

      <li class="list-group-item">
        <form action="/create_assignment" method="post">
      <!-- Hidden input for authenticity token to protect from forgery -->
      <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">

      <!-- Label and input for chores_id -->
      <div class="form-group">
        <label for="chores_id" class="control-label">
          Chores
        </label>

        <%= select_tag(:chores_id, options_from_collection_for_select(Chore.all, :id, :chore_name), :class => "form-control") %>
      </div>

      <!-- Label and input for parents_id -->
      <div class="form-group">

 
            <input type="hidden" id="parent_id" name="parents_id" class="form-control" value="<%= current_parent.id %>">
      </div>

      <!-- Label and input for kids_id -->
      <div class="form-group">

         <input type="hidden" id="kid_id" name="kids_id" placeholder="Kid name" class="form-control" value="<%= @kid.id %>">
      </div>

      <!-- Label and input for due_date -->
      <div class="form-group">
        <label for="due_date" class="control-label">
          Due date
        </label>

        <input type="text" id="due_date" name="due_date" placeholder="Due date" class="form-control" value="">
      </div>

     

      <button class="btn btn-block btn-success">
        Create Assignment
      </button>
    </form>
      </li>
    </ul>
  </div>
</div>
